{"version":3,"sources":["Mapper.ts","Question.ts"],"names":["TsMapping","TsMapping.JsonProperty","TsMapping.MapUtils","TsMapping.MapUtils.constructor","TsMapping.MapUtils.isPrimitive","TsMapping.MapUtils.isArray","TsMapping.MapUtils.getClazz","TsMapping.MapUtils.getJsonProperty","TsMapping.MapUtils.deserialize","QuestionEditor","QuestionEditor.QuestionType","QuestionEditor.Answer","QuestionEditor.Answer.constructor","QuestionEditor.Answer.changeOrderCallback","QuestionEditor.Question","QuestionEditor.Question.constructor","QuestionEditor.Question.changeOrder","QuestionEditor.QuestionEditor","QuestionEditor.QuestionEditor.constructor","QuestionEditor.QuestionEditor.initialize","QuestionEditor.QuestionEditor.loadData"],"mappings":"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CAACA;oBAChDA,mBAAmBA;oBACnBA,MAAMA,CAACA;gBACXA,CAACA;gBAEDA,IAAIA,kBAAkBA,GAAoCA,UAACA,gBAAgBA;oBACvEA,IAAIA,YAAYA,GAAGA,gBAAgBA,CAACA,IAAIA,IAAIA,GAAGA,CAACA;oBAChDA,IAAIA,SAASA,GAAGA,UAAUA,GAAGA,UAAUA,CAACA,YAAYA,CAACA,GAAGA,SAASA,CAACA;oBAElEA,IAAIA,KAAKA,GAAGA,QAAQA,CAACA,QAAQA,CAACA,GAAGA,EAAEA,GAAGA,CAACA,CAACA;oBACxCA,IAAIA,QAAQA,GAAGA,QAAQA,CAACA,eAAeA,CAACA,GAAGA,EAAEA,GAAGA,CAACA,CAACA;oBAElDA,EAAEA,CAACA,CAACA,qBAAqBA,CAACA,CAACA,CAACA;wBACxBA,EAAEA,CAACA,CAACA,QAAQA,CAACA,KAAKA,IAAIA,QAAQA,CAACA,WAAWA,CAACA,KAAKA,CAACA,CAACA,CAACA,CAACA;4BAChDA,EAAEA,CAACA,CAACA,SAASA,IAAIA,QAAQA,CAACA,OAAOA,CAACA,SAASA,CAACA,CAACA,CAACA,CAACA;gCAC3CA,MAAMA,CAACA,SAASA,CAACA,GAAGA,CAChBA,UAACA,IAAIA,IAAKA,OAAAA,QAAQA,CAACA,WAAWA,CAACA,QAAQA,CAACA,KAAKA,EAAEA,IAAIA,CAACA,EAA1CA,CAA0CA,CACvDA,CAACA;4BACNA,CAACA;4BAACA,IAAIA,CAACA,CAACA;gCACJA,MAAMA,CAACA,SAASA,CAACA;4BACrBA,CAACA;wBACLA,CAACA;wBAACA,IAAIA,CAACA,CAACA;4BACJA,MAAMA,CAACA,SAASA,CAACA;wBACrBA,CAACA;oBACLA,CAACA;oBAACA,IAAIA,CAACA,EAAEA,CAACA,CAACA,CAACA,QAAQA,CAACA,WAAWA,CAACA,QAAQA,CAACA,KAAKA,CAACA,CAACA,CAACA,CAACA;wBAC/CA,MAAMA,CAACA,QAAQA,CAACA,WAAWA,CAACA,KAAKA,EAAEA,SAASA,CAACA,CAACA;oBAClDA,CAACA;oBAACA,IAAIA,CAACA,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","file":"appscripts.js","sourcesContent":["module TsMapping {\r\n    export interface IJsonMetaData<T> {\r\n        name?: string,\r\n        clazz?: { new (): T }\r\n    }\r\n    const jsonMetadataKey = \"jsonProperty\";\r\n    export function JsonProperty<T>(metadata?: IJsonMetaData<T> | string): any {\r\n        if (metadata instanceof String || typeof metadata === \"string\") {\r\n            return Reflect.metadata(jsonMetadataKey, {\r\n                name: metadata,\r\n                clazz: undefined\r\n            });\r\n        } else {\r\n            let metadataObj = <IJsonMetaData<T>>metadata;\r\n            return Reflect.metadata(jsonMetadataKey, {\r\n                name: metadataObj ? metadataObj.name : undefined,\r\n                clazz: metadataObj ? metadataObj.clazz : undefined\r\n            });\r\n        }\r\n    }\r\n\r\n    export class MapUtils {\r\n        static isPrimitive(obj) {\r\n            switch (typeof obj) {\r\n                case \"string\":\r\n                case \"number\":\r\n                case \"boolean\":\r\n                    return true;\r\n            }\r\n            return !!(obj instanceof String || obj === String ||\r\n                obj instanceof Number || obj === Number ||\r\n                obj instanceof Boolean || obj === Boolean);\r\n        }\r\n\r\n        static isArray(object) {\r\n            if (object === Array) {\r\n                return true;\r\n            } else if (typeof Array.isArray === \"function\") {\r\n                return Array.isArray(object);\r\n            }\r\n            else {\r\n                return !!(object instanceof Array);\r\n            }\r\n        }\r\n\r\n        static getClazz(target: any, propertyKey: string): any {\r\n            return Reflect.getMetadata(\"design:type\", target, propertyKey);\r\n        }\r\n\r\n        static getJsonProperty<T>(target: any, propertyKey: string): IJsonMetaData<T> {\r\n            return Reflect.getMetadata(jsonMetadataKey, target, propertyKey);\r\n        }\r\n\r\n        static deserialize<T>(clazz: { new (): T }, jsonObject) {\r\n            if ((clazz === undefined) || (jsonObject === undefined)) return undefined;\r\n            let obj = new clazz();\r\n\r\n            Object.keys(obj).forEach((key) => {\r\n                var item = obj[key],\r\n                    itemIsObservable = ko.isObservable(item),\r\n                    itemIsWritableObservable = ko.isWriteableObservable(item),\r\n                    itemIsObservableArray = itemIsObservable && MapUtils.isArray(item.peek());\r\n\r\n                if (itemIsObservable && !itemIsWritableObservable) {\r\n                    // Ignore this prop\r\n                    return;\r\n                }\r\n\r\n                let propertyMetadataFn: (x : IJsonMetaData<any>) => any = (propertyMetadata) => {\r\n                    let propertyName = propertyMetadata.name || key;\r\n                    let innerJson = jsonObject ? jsonObject[propertyName] : undefined;\r\n\r\n                    let clazz = MapUtils.getClazz(obj, key);\r\n                    let metadata = MapUtils.getJsonProperty(obj, key);\r\n\r\n                    if (itemIsObservableArray) {\r\n                        if (metadata.clazz || MapUtils.isPrimitive(clazz)) {\r\n                            if (innerJson && MapUtils.isArray(innerJson)) {\r\n                                return innerJson.map(\r\n                                    (item) => MapUtils.deserialize(metadata.clazz, item)\r\n                                );\r\n                            } else {\r\n                                return undefined;\r\n                            }\r\n                        } else {\r\n                            return innerJson;\r\n                        }\r\n                    } else if (!MapUtils.isPrimitive(metadata.clazz)) {\r\n                        return MapUtils.deserialize(clazz, innerJson);\r\n                    } else {\r\n                        return jsonObject ? jsonObject[propertyName] : undefined;\r\n                    }\r\n                };\r\n\r\n                let propertyMetadata = MapUtils.getJsonProperty(obj, key);\r\n                if (propertyMetadata) {\r\n                    if (itemIsObservable) {\r\n                        obj[key](propertyMetadataFn(propertyMetadata));\r\n                    } else {\r\n                        obj[key] = propertyMetadataFn(propertyMetadata);\r\n                    }\r\n                } else {\r\n                    if (jsonObject && jsonObject[key] !== undefined) {\r\n                        if (itemIsObservable) {\r\n                            obj[key](jsonObject[key]);\r\n                        } else {\r\n                            obj[key] = jsonObject[key];\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n\r\n            return obj;\r\n        }\r\n    }\r\n}","/// <reference path=\"../../node_modules/reflect-metadata/reflect-metadata.d.ts\"/>\r\n/// <reference path=\"../../typings/jquery/jquery.d.ts\"/>\r\n/// <reference path=\"../../typings/knockout/knockout.d.ts\"/>\r\n/// <reference path=\"Mapper.ts\"/>\r\n\r\nmodule QuestionEditor {\r\n    import JsonProperty = TsMapping.JsonProperty;\r\n\r\n    export enum QuestionType {\r\n        MultipleChoice,\r\n        Text\r\n    }\r\n\r\n    export class Answer {\r\n        public id: number = 0;\r\n        public text = ko.observable<string>();\r\n        public order = ko.observable<number>(0);\r\n\r\n        constructor() {\r\n            console.log('hello answer');\r\n\r\n            // Bind \"this\"\r\n            this.changeOrderCallback = this.changeOrderCallback.bind(this);\r\n        }\r\n\r\n        public changeOrderCallback(parent: Question, offset: number) {\r\n            return () => parent.changeOrder(this, offset);\r\n        }\r\n    }\r\n\r\n    export class Question {\r\n        public text = ko.observable<string>();\r\n        public id: number = 0;\r\n        public type = ko.observable<QuestionType>(QuestionType.MultipleChoice);\r\n        public order = ko.observable<number>(0);\r\n\r\n        @JsonProperty({ clazz: Answer })\r\n        public answers = ko.observableArray<Answer>();\r\n\r\n\r\n        public changeOrder(vm: Answer, offset: number) {\r\n            let idx = this.answers.indexOf(vm), arr = this.answers.peek();\r\n            if (idx === -1 || idx === 0 && offset < 0) {\r\n                return;\r\n            }\r\n\r\n            if (idx === arr.length - 1 && offset > 0) {\r\n                return;\r\n            }\r\n\r\n            let tmp = arr[idx + offset];\r\n            let tmpOrder = tmp.order.peek();\r\n\r\n            tmp.order(vm.order.peek());\r\n            vm.order(tmpOrder);\r\n\r\n            this.answers.sort((x, y) => x.order() - y.order());\r\n        }\r\n    }\r\n\r\n    export class QuestionEditor {\r\n        public static instance;\r\n\r\n        public isLoading = ko.observable<boolean>(true);\r\n\r\n        public static initialize() {\r\n            var editor = new QuestionEditor();\r\n\r\n            QuestionEditor.instance = editor;\r\n            ko.applyBindings(editor, document.getElementById('ko-root'));\r\n\r\n            $.getJSON('/home/getquestions').done(x => editor.loadData(x));\r\n        }\r\n\r\n        public questions = ko.observableArray<Question>();\r\n\r\n        public loadData(data: any[]): void {\r\n            var questions = [];\r\n            for (let i = 0, cnt = data.length; i < cnt; i++) {\r\n                questions.push(\r\n                    TsMapping.MapUtils.deserialize<Question>(Question, data[i])\r\n                );\r\n            }\r\n\r\n            this.questions(questions);\r\n            this.isLoading(false);\r\n        }\r\n\r\n    }\r\n\r\n    QuestionEditor.initialize();\r\n}"],"sourceRoot":"/source/"}